<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üéâ Fun Reading Speed Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    * { box-sizing: border-box; }

    body, html {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #7f00ff, #e100ff);
      min-height: 100vh;
      overflow-y: auto;
    }

    #fullscreenPrompt {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(135deg, #7f00ff, #e100ff);
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 9999;
      font-size: 2rem;
      padding: 20px;
      cursor: pointer;
    }

    #fullscreenPrompt span {
      font-size: 1.2rem;
      opacity: 0.8;
      margin-top: 15px;
    }

    .container {
      display: none;
      max-width: 800px;
      margin: 60px auto;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 40px;
      color: #fff;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #timer {
      font-size: 1.2rem;
      background: rgba(0, 0, 0, 0.2);
      padding: 10px 20px;
      border-radius: 10px;
      color: #fff;
      font-weight: bold;
    }

    h2 {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #fff;
      text-shadow: 0 0 10px #ffd6ff;
    }

    p#originalText {
      background: rgba(255, 255, 255, 0.2);
      padding: 15px;
      border-radius: 12px;
      font-size: 1.1rem;
      line-height: 1.6;
      border-left: 6px solid #ffffff70;
    }

    textarea {
      width: 100%;
      height: 120px;
      margin-top: 20px;
      font-size: 1rem;
      padding: 10px;
      border-radius: 10px;
      border: none;
      background: rgba(255, 255, 255, 0.15);
      color: #fff;
      resize: none;
    }

    textarea::placeholder {
      color: #ddd;
    }

    button {
      padding: 12px 20px;
      font-size: 1rem;
      margin-top: 20px;
      margin-right: 10px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: linear-gradient(90deg, #a100f2, #ff69b4);
      color: white;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: transform 0.2s, box-shadow 0.3s;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }

    #result {
      margin-top: 25px;
      font-size: 1rem;
      padding: 15px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      color: #e0ffe0;
      border-left: 4px solid #32cd32;
    }

    .legend {
      margin-top: 15px;
      font-size: 0.9rem;
    }

    .correct-word {
      color: #00ff88;
      font-weight: bold;
    }

    .wrong-word {
      color: #ff4444;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <div id="fullscreenPrompt" onclick="enterFullscreen()">
    üëâ Tap or click anywhere to enter fullscreen mode  
    <span>(Recommended for best experience)</span>
  </div>

  <div class="container" id="mainContainer">
    <div class="header-row">
      <div id="timer">‚è≥ Timer: 10s</div>
    </div>

    <h2>üöÄ Fun Reading Speed Game <span>üß†</span></h2>

    <p><strong>üé§ Read this aloud:</strong></p>
    <p id="originalText">
      Today, science is growing fast with smart and new ideas. Solar panels now turn sunlight into power for homes and cars. Electric vehicles help reduce air pollution and run without petrol. Robots are used in hospitals to help doctors during surgeries. Drones can fly and take photos or deliver packages.
    </p>

    <button onclick="startRecognition()">üéô Start Speaking</button>
    <textarea id="userInput" placeholder="Your speech will appear here..."></textarea>

    <button onclick="stopTimer()">‚èπ Stop Timer</button>
    <button onclick="checkAccuracy()">‚úÖ Check Accuracy</button>

    <div class="legend">
      ‚úÖ <span class="correct-word">Green</span>: Correct &nbsp;&nbsp;
      ‚ùå <span class="wrong-word">Red</span>: Incorrect / Missing
    </div>

    <p id="result"></p>
  </div>

  <script>
    let recognition;
    let startTime = 0;
    let endTime = 0;
    let countdownInterval;
    let timeLeft = 10;

    function enterFullscreen() {
      const elem = document.documentElement;
      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.webkitRequestFullscreen) {
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) {
        elem.msRequestFullscreen();
      }

      document.getElementById('fullscreenPrompt').style.display = 'none';
      document.getElementById('mainContainer').style.display = 'block';
    }

    if ('webkitSpeechRecognition' in window) {
      recognition = new webkitSpeechRecognition();
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.lang = 'en-US';

      recognition.onstart = function () {
        startTimer();
      };

      recognition.onresult = function (event) {
        const transcript = event.results[0][0].transcript;
        document.getElementById("userInput").value = transcript;
      };

      recognition.onerror = function (event) {
        alert("Oops! Something went wrong: " + event.error);
      };
    } else {
      alert("Sorry, your browser doesn't support Speech Recognition.");
    }

    function startRecognition() {
      recognition.start();
    }

    function startTimer() {
      startTime = new Date().getTime();
      timeLeft = 10;
      document.getElementById("result").innerText = "‚è± Timer started. Start reading!";
      updateTimerDisplay();

      countdownInterval = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();

        if (timeLeft <= 0) {
          clearInterval(countdownInterval);
          endTime = new Date().getTime();
          document.getElementById("result").innerText = "‚è∞ Time's up! Now check your accuracy.";
          recognition.stop(); // Stop recognition too
        }
      }, 1000);
    }

    function stopTimer() {
      clearInterval(countdownInterval);
      endTime = new Date().getTime();
      document.getElementById("result").innerText = "üõë Timer stopped. Now check your results!";
    }

    function updateTimerDisplay() {
      document.getElementById("timer").innerText = `‚è≥ Timer: ${timeLeft}s`;
    }

    function checkAccuracy() {
      const originalText = document.getElementById("originalText").innerText;
      const original = originalText.toLowerCase().replace(/[.,]/g, "").split(" ");
      const user = document.getElementById("userInput").value.toLowerCase().replace(/[.,]/g, "").split(" ");

      let matchCount = 0;
      let visualOutput = "";

      for (let i = 0; i < original.length; i++) {
        if (user[i] === original[i]) {
          visualOutput += `<span class="correct-word">${original[i]}</span> `;
          matchCount++;
        } else {
          visualOutput += `<span class="wrong-word">${original[i]}</span> `;
        }
      }

      const accuracy = ((matchCount / original.length) * 100).toFixed(2);
      const durationInSeconds = (endTime - startTime) / 1000;
      const wpm = ((user.length / durationInSeconds) * 60).toFixed(2);

      document.getElementById("result").innerHTML = `
        üéØ <strong>Accuracy:</strong> ${accuracy}%<br>
        üöÄ <strong>Speed:</strong> ${wpm} words per minute<br>
        üìù <strong>Matched Words:</strong> ${matchCount} / ${original.length}<br><br>
        <strong>Visual Comparison:</strong><br>
        <div style="background: rgba(0,0,0,0.1); padding: 10px; border-radius: 10px; margin-top: 10px;">
          ${visualOutput.trim()}
        </div>
      `;
    }
  </script>
</body>
</html>
